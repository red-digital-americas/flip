<booking-navbar [section]="section"></booking-navbar>
<div class="ap-form ap-form--parent ml-col-1 background-white">
    <div class="ml-col-1 margin-bottom-x">
        <h4 class="ap-form__titulo ap-form__titulo--header text-left">
            Reservaciones
        </h4>
    </div>
    <div class="ml-col-1 margin-bottom-m">
        <button 
            class="ap-form__rButton button-red"
            (click)="viewDetail()">
            Mi Perfil
        </button>
        <button 
            *ngIf="statusBooking"
            class="ap-form__rButton button-green button-icon button-icon--add-white"
            (click)="showModal('add_service'); getServicesData();">
            Agregar Servicio
        </button>
        <button 
            *ngIf="statusBooking"
            class="ap-form__rButton button-yellow button-icon button-icon--edit-white"
            (click)="showModal('edit_end_date'); editEndDateInit();">
            Editar Fecha de Finalización
        </button>
        <button 
            *ngIf="statusBooking"
            class="ap-form__rButton button-red button-icon button-icon--cancel-white"
            (click)="showModal('cancel_booking')">
            Cancelar
        </button>
        <h4 class="ap-form__titulo ap-form__titulo--auto-width">
            {{ name_build }}
        </h4>
    </div>
    <div class="ml-col-1 margin-bottom-x">
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Estatus:
            </div>
            <div class="ml-col-1 text-bold">
                <div *ngIf="current_membership.status.idStatusBooking === 1">Pendiente</div>
                <div *ngIf="current_membership.status.idStatusBooking === 2">Check In</div>
                <div *ngIf="current_membership.status.idStatusBooking === 3">Check Out</div>
                <div *ngIf="current_membership.status.idStatusBooking === 4">Cancelar </div>
            </div>
        </div> 
        <div *ngIf="current_membership.status.idStatusBooking === 4" class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Cancelar Detalle:
            </div>
            <div class="ml-col1 text-bold">
                {{ current_membership?.status.detalle }}
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Tenant:
            </div>
            <div class="ml-col1 text-bold">
                {{ fullName }}
            </div>
        </div>    
    </div>
    <div class="ml-col-1 margin-bottom-x">
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Programa Inicia:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.dateStartProgram }} 
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Programa termina:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.dateEndProgram }} 
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Check In:
            </div>
            <div *ngIf="current_membership?.dateStartReal != null ; then elseIn else thenIn"></div>
            <ng-template #elseIn >
                <div class="ml-col-1 text-bold">
                    {{ current_membership?.dateStartReal != null ? current_membership?.dateStartReal : 'No Date' }}  
                </div>
            </ng-template>
            <ng-template #thenIn>
                <button 
                    *ngIf="check_in_active || statusBooking"
                    style="float: left;"
                    class="ap-form__rButton ap-form__rButton--no-margin button-blue"
                    (click)="showModal('check_in')">
                    Check In
                </button>
            </ng-template>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Check Out:
            </div>
            <div *ngIf="current_membership?.dateEndReal != null; then elseOut else thenOut"></div>
            <ng-template #elseOut >
                <div class="ml-col-1 text-bold">
                    {{ current_membership?.dateEndReal != null ? current_membership?.dateEndReal : 'No Date' }}  
                </div>
            </ng-template>
            <ng-template #thenOut>
                <div *ngIf="!ifCheckIn">
                    <button
                        [disabled]="ifCheckIn"
                        *ngIf="statusBooking"
                        style="float: left;"
                        class="ap-form__rButton ap-form__rButton--no-margin button-pink"
                        (click)="showModal('check_out')">
                        Check Out
                    </button>
                </div>
            </ng-template>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Roomate tipo:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.roomateType }}
            </div>
        </div>
    </div>
    <div class="ml-col-1 margin-bottom-x">
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Cuarto:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.roomName }}
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Camas reservadas:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.beds }} 
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Noches reservadas:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.customDateDif }}
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Membresía:
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.membresia }}
            </div>
        </div>
        <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
            <div class="ml-col-1">
                Costo por noche: 
            </div>
            <div class="ml-col-1 text-bold">
                {{ current_membership?.costPerNigth | currency }}
            </div>
        </div>
    </div>
    <div class="ml-col-1 margin-top-x">
        <button 
            class="ap-form__rButton button-toggle text-bold"
            (click)="showSection('beds')">
            {{ toggle_label_button }}
        </button>
        <h4 class="ap-form__titulo ap-form__titulo--auto-width">
            Camas Adicionales
        </h4>
        <div class="ml-col-1 margin-top-x padding-bottom-x" *ngIf="beds_section">
            <div class="ml-col-1 padding-general-m card-style margin-bottom-x" *ngFor="let bed of current_beds;">
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Nombre*"
                            id="ab_name" 
                            name="ab_name"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.name }}" />
                        <label 
                            for="ab_name" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.name != ''">
                            Nombre* 
                        </label>
                        </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Apellido Paterno*"
                            id="ab_lname" 
                            name="ab_lname"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.lastName }}" />
                        <label 
                            for="ab_lname" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.lastName != ''">
                            Apellido Paterno* 
                        </label>
                        </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Apellido Materno*"
                            id="ab_mname" 
                            name="ab_mname"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.motherName }}" />
                        <label 
                            for="ab_mname" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.motherName != ''">
                            Apellido Materno* 
                        </label>
                        </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Género*"
                            id="ab_mname" 
                            name="ab_mname"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.gender }}" />
                        <label 
                            for="ab_mname" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.id != null">
                            Género* 
                        </label>
                        </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Email*"
                            id="ab_mail" 
                            name="ab_mail"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.email }}" />
                        <label 
                            for="ab_mail" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.email != ''">
                            Email* 
                        </label>
                        </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                        <div class="ap-form__input">
                        <input 
                            required
                            readonly
                            type="text" 
                            placeholder="Número de teléfono*"
                            id="ab_phone" 
                            name="ab_phone"
                            class="ap-form__input-text ap-form__input--no-border"
                            value="{{ bed.phone }}" />
                        <label 
                            for="ab_phone" 
                            class="ap-form__label ap-form__label-text"
                            [class.ap-form__label-text--active]="bed.phone != ''">
                            Número de teléfono* 
                        </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- div class="ml-col-1 ap-membership">
        <div class="ap-membership__container ap-membership__container--c">
            <p class="ap-membership__text ml-col-1">
                Type Room
                <span class="text-bold">
                    {{ current_membership?.typeRoom }}
                </span>
            </p>
            <p class="ap-membership__text ml-col-1">
                Servicios incluidos
            </p>
            <div class="ml-col-1 ap-membership__services">
                <figure class="ap-membership__services-service" *ngFor="let service of current_services;">
                    <img class="ap-membership__services-service-img" 
                            src="{{ service.icon }}" />
                    <span class="ap-membership__services-service-name">
                        {{ service.name }}
                    </span>
                </figure>
            </div>
        </div>
    </div -->
    <div class="ml-col-1 top-separator padding-tb-m margin-top-m">
        <h4 class="ap-form__titulo">
            Pagos
        </h4>
        <div class="ml-col-1">
            <div class="ml-col-4o margin-bottom-x">
                <div class="ml-col-1 text-bold margin-bottom-x">
                   {{ current_membership?.membresia }}
                </div>
                <div class="ml-col-1 padding-right-m">
                    {{ current_membership?.memdesc }}
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Noches reservadas:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ current_membership?.customDateDif }}
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Camas:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ current_membership?.beds }} 
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Tipo de Habitación:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ current_membership?.typeRoom }}
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-right">
                    <div class="ml-col-1 padding-bottom-x">
                        Monto:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ current_membership?.price | currency }}
                    </div>
                </div>
            </div>
        </div>
        <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
            <div class="ml-col-1 text-bold">
                Servicios de pago
            </div>
        </div>
        <table mat-table mat-sort [dataSource]="current_aditionals" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
            <ng-container matColumnDef="icon">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center"></th>
                <td mat-cell *matCellDef="let element" class="table__data table__icon--width table__data-center">
                    <figure class="table__icon">
                        <img src="{{ element.icon }}" 
                             class="table__icon-img filter-brightness" />
                    </figure>
                </td>
            </ng-container>
            <ng-container matColumnDef="service">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.booked }}</td>
            </ng-container>
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Tipo</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.typeService }}</td>
            </ng-container>
            <ng-container matColumnDef="lapse">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Lapso</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.type }}</td>
            </ng-container>
            <ng-container matColumnDef="sdate">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha Inicio</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecini }}</td>
            </ng-container>
            <ng-container matColumnDef="edate">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha de Finalización</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecfinish }}</td>
            </ng-container>
            <ng-container matColumnDef="cclue">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Card Clue</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center"> **** {{ element.creditCard }}</td>
            </ng-container>
            <ng-container matColumnDef="xcost">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-right">Monto</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-right">{{ element.cost | currency }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="table_colums_paid_services"></tr>
            <tr mat-row *matRowDef="let row; columns: table_colums_paid_services;"></tr>
        </table>
        <div class="table__footer">
            <div class="table__footer-dato">
                <p class="table__footer-dato-a">Factura de servicios:</p> 
                <span class="text-bold table__footer-dato-b">
                    {{ bill_services_added | currency }}
                </span>
            </div>
            <div class="table__footer-dato">
                <p class="table__footer-dato-a">Membresía cost:</p> 
                <span class="text-bold table__footer-dato-b">
                    {{ current_membership?.price | currency }}
                </span>
            </div>
            <div class="table__footer-dato">
                <p class="table__footer-dato-a">Total:</p> 
                <span class="text-bold table__footer-dato-b table__footer-dato--big">
                    {{ bill_services_added_total | currency }}
                </span>
            </div>
        </div>
    </div>
    <div class="ml-col-1 margin-bottom-x">
        <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
            <div class="ml-col-1 text-bold">
                Pendiente de pagar
            </div>
        </div>
        <table mat-table mat-sort [dataSource]="current_topay" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
            <ng-container matColumnDef="icon">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center"></th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                    <figure class="table__icon">
                        <img src="{{ element.icon }}" 
                             class="table__icon-img filter-brightness" />
                    </figure>
                </td>
            </ng-container>
            <ng-container matColumnDef="service">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.booked }}</td>
            </ng-container>
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Tipo</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.typeService }}</td>
            </ng-container>
            <ng-container matColumnDef="lapse">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Lapso</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.type }}</td>
            </ng-container>
            <ng-container matColumnDef="sdate">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha Inicio</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecini }}</td>
            </ng-container>
            <ng-container matColumnDef="edate">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha de Finalización</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecfinish }}</td>
            </ng-container>
            <ng-container matColumnDef="xcost">
                <th mat-header-cell *matHeaderCellDef class="table__header table__header-right">Extra Monto</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-right">{{ element.cost | currency }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="table_colums_pending"></tr>
            <tr mat-row *matRowDef="let row; columns: table_colums_pending;"></tr>
        </table>
        <div class="table__footer">
            <div class="table__footer-dato">
                <p class="table__footer-dato-a">Total:</p> 
                <span class="text-bold table__footer-dato-b table__footer-dato--big">
                    {{ bill_services_topay | currency }}
                </span>
            </div>
        </div>
    </div>
    <div class="ml-col-1 bottom-separator margin-bottom-x">
        <button 
            *ngIf="statusBooking && bill_services_topay != 0"
            class="ap-form__rButton button-black text-bold padding-lateral-m button-icon button-icon--ccard-white"
            (click)="showModal('confirm_payment')">
            Pago
        </button>
        <h4 class="ap-form__titulo ap-form__titulo--auto-width">
            Pago por método predeterminado
        </h4>
        <div class="ml-col-1 margin-bottom-x">
            <div class="ml-col-3">
                <div class="credit-card credit-card--single">
                  <div class="credit-card__container credit-card--no-padding-left">
                    <div class="credit-card__card card-style">
                      <h4 class="credit-card__card-titulo">
                        {{current_card.name}}
                      </h4>
                      <p 
                        class="credit-card__card-number"
                        [ngClass]="{
                            'credit-card__card-number--visa' : kind_card == 'visa',
                            'credit-card__card-number--mcard' : kind_card == 'mcard',
                            'credit-card__card-number--american' : kind_card == 'american',
                            'credit-card__card-number--default' : kind_card == ''
                          }">
                        <span>****</span>
                        <span>****</span>
                        <span>****</span>
                        <span>{{ number_card }}</span>
                      </p>
                      <p class="credit-card__card-date">
                          {{ card_month_year_data }}
                      </p>
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <div class="ml-col-1 margin-bottom-min">
        <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
            <button 
                class="ap-form__rButton button-toggle text-bold"
                (click)="showSection('history_section')">
                {{ toggle1_label_button }}
            </button>
            <h4 class="ap-form__titulo ap-form__titulo--auto-width">
                Historial de Pagos
            </h4>
        </div>
        <div class="ml-col-1" *ngIf="history_section">
            <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
                <div class="ml-col-1">
                    Membresías Historial
                </div>
            </div>
            <table mat-table mat-sort [dataSource]="current_paymentHis" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                <ng-container matColumnDef="membership">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Membresía</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.nameMembership }}</td>
                </ng-container>
                <ng-container matColumnDef="payday">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Dia de pago</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.paymentData.datePay }}</td>
                </ng-container>
                <ng-container matColumnDef="dateStart">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio Inicio</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateStart }}</td>
                </ng-container>
                <ng-container matColumnDef="dateEnd">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio Termino</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateEnd }}</td>
                </ng-container>
                <ng-container matColumnDef="card">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Card clue</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">**** {{ element.creditNumber }}</td>
                </ng-container>
                <ng-container matColumnDef="ammount">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Monto</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.paymentData.amount | currency }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="table_payHistory_colums"></tr>
                <tr mat-row *matRowDef="let row; columns: table_payHistory_colums;"></tr>
            </table>
            <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x margin-top-x">
                <div class="ml-col-1">
                    Servicios Historial
                </div>
            </div>
            <table mat-table mat-sort [dataSource]="current_paymentSer" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.idServiceNavigation?.name }}</td>
                </ng-container>
                <ng-container matColumnDef="payday">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Dia de pago</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.cc.datePay }}</td>
                </ng-container>
                <ng-container matColumnDef="dateStart">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio Inicia</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateStart }}</td>
                </ng-container>
                <ng-container matColumnDef="dateEnd">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio Termina</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateEnd }}</td>
                </ng-container>
                <ng-container matColumnDef="card">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Card clue</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                        <span *ngIf="element.cardClue == null">No Data</span>
                        <span *ngIf="element.cardClue != null">**** {{ element.cardClue }}</span>
                    </td>
                </ng-container>
                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Monto</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.idServiceNavigation.price | currency }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="table_serHistory_colums"></tr>
                <tr mat-row *matRowDef="let row; columns: table_serHistory_colums;"></tr>
            </table>
        </div>
    </div>
    <div class="ml-col-1 margin-tb-min">
        <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
            <div class="ml-col-1 text-bold">
                Booking Historial
            </div>
        </div>
        <mat-table mat-table matSort [dataSource]="current_history" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
            <ng-container matColumnDef="build">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Project</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.build }}</td>
            </ng-container>
            <ng-container matColumnDef="room">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Cuarto</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.typeRoom }}</td>
            </ng-container>
            <ng-container matColumnDef="beds">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Camas</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.beds }}</td>
            </ng-container>
            <ng-container matColumnDef="membership">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Membresía</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                    <div *ngIf="element.membership !== null; then thenBlock else elseBlock"></div>
                    <ng-template #thenBlock>{{element.membership.membershipType}}</ng-template>
                    <ng-template #elseBlock>None</ng-template>
                </td>
            </ng-container>
            <ng-container matColumnDef="adate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Llegada<br />Fechar</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateStart }}</td>
            </ng-container>
            <ng-container matColumnDef="ddate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Departure<br />Fechar</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateEnd }}</td>
            </ng-container>
            <ng-container matColumnDef="roomateFlip">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center"> Roomate Tipo </th>
                <td mat-cell *matCellDef="let element" class="table__data"> {{element.roomateFlip}} </td>
            </ng-container>
            <ng-container matColumnDef="aout">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Total facturado</th>
                <td mat-cell *matCellDef="let element" class="table__data">
                    <div *ngIf="element.membership !== null; then thenBlock else elseBlock"></div>
                    <ng-template #thenBlock>{{element.membership.priceMembership + element.amountOutstanding | currency }}</ng-template>
                    <ng-template #elseBlock>{{element.amountOutstanding | currency }}</ng-template>
                </td>
            </ng-container>
            <ng-container matColumnDef="pendingBilled">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header table__header-center">Pendiente</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.pending | currency }}</td>
            </ng-container>
            <ng-container matColumnDef="active">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header"> Activo </th>
                <td mat-cell *matCellDef="let element" class="table__data" [innerHTML]="element.active">  </td>
            </ng-container>
            <ng-container matColumnDef="button">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header">Ver más</th>
                <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                    <button 
                        mat-raised-button color="accent"
                        class="table__data-button"
                        (click)="showModal('history'); moreHistoryData( element )">
                        Detalle
                    </button>
                </td>
            </ng-container>
            <!-- <ng-container matColumnDef="showBooking">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="table__header"> Booking </th>
                <td mat-cell *matCellDef="let element">
                    <button 
                        (click)="viewBookingDetail('reservations', element.idUser, element.idBooking)" 
                        mat-raised-button color="accent"
                        class="table__data-button button-pink">
                        Booking
                    </button>
                </td>
            </ng-container> -->
            <tr mat-header-row *matHeaderRowDef="table_history_colums"></tr>
            <tr mat-row *matRowDef="let row; columns: table_history_colums;"></tr>
        </mat-table>
    </div>
</div>
<div class="ml-modal ml-modal--bg-black" *ngIf="show_page_modal">
    <div class="ml-modal__pop" *ngIf="modal_to_show == 'check_in'">
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Check In
        </p>
        <p class="ml-modal__pop-text">
            ¿Estás seguro de Check In?
        </p>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="showModal()"
                class="ml-modal__pop-buttons-button button-pink">
                Cancelar
            </button>
            <button 
                (click)="confirmCheckInOut('in')"
                class="ml-modal__pop-buttons-button button-black">
                Check In
            </button>
        </div>
    </div>
    <div class="ml-modal__pop" *ngIf="modal_to_show == 'check_out'">
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Check Out
        </p>
        <p class="ml-modal__pop-text">
            ¿Estás seguro de Check Out?
        </p>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="showModal()"
                class="ml-modal__pop-buttons-button button-pink">
                Cancelar
            </button>
            <button 
                (click)="confirmCheckInOut('out')"
                class="ml-modal__pop-buttons-button button-black">
                Check Out
            </button>
        </div>
    </div>
    <div class="ml-modal__pop" *ngIf="modal_to_show == 'cancel_booking'">
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Cancelar Booking
        </p>
        <p class="ml-modal__pop-text">
            ¿Estás seguro de cancelar la reserva?
        </p>
          <div class="ml-col-1">
            <div class="ml-col-1">
              <div class="ap-form__input ap-form__input--full-width">
                <input 
                    type="text" 
                    placeholder="Detalle" 
                    id="detailCancel" 
                    name="detailCancel"
                    class="ap-form__input-text ap-form__input" 
                    [(ngModel)]="detailCancel"
                    [class.form_error_found]="formCancel.no_detail"
                    />
                <label 
                    for="detailCancel" 
                    class="ap-form__label ap-form__label-text ap-form__label-text--active">
                </label>
                <span class="ml-col-1 form_error_found_label" *ngIf="formCancel.no_detail">
                    Detalle se requiere*
                </span>
              </div>
            </div>
          </div>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="showModal()"
                class="ml-modal__pop-buttons-button button-pink">
                Cancelar
            </button>
            <button 
                (click)="confirmCancelBooking()"
                class="ml-modal__pop-buttons-button button-black">
                Ok
            </button>
        </div>
    </div>
    <div class="ml-modal__content card-style" *ngIf="modal_to_show == 'add_service'">
        <div class="ml-col-1 margin-bottom-m">
            <p class="ml-modal__pop-titulo">
                Agregar Servicios
            </p>
            <button 
                class="ap-form__rButton button-red button-icon button-icon--cancel-white"
                (click)="showModal('edit_end_date'); editEndDateInit();">
                Cerrar
            </button>
            <h4 class="ap-form__titulo ap-form__titulo--auto-width">
                Servicios Adicionales
            </h4>
        </div> 
        <div class="ml-col-1">
            <table mat-table mat-sort [dataSource]="all_services_gotted" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                <ng-container matColumnDef="icon">
                    <th mat-header-cell *matHeaderCellDef class="table__header"></th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                        <figure class="table__icon">
                            <img src="{{ element.icon }}" 
                                  class="table__icon-img filter-brightness" />
                        </figure>
                    </td>
                </ng-container>
                <ng-container matColumnDef="service">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Service</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.name }}</td>
                </ng-container>
                <ng-container matColumnDef="description">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Descripción</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center padding-tbi-x">
                        +++ Chromin Rush +++ Today our Chromin Rush event starts once again and it runs until 7th May at 10 am LST. Pick up special loot boxes in some of the Galaxy Gates, earn the precious Chromin ore & craft event recipes: Seprom, Osmium and the brand-new SPC-SPE01 ship upgrade module!
                    </td>
                </ng-container>
                <ng-container matColumnDef="recurrent">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Recurrente</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__header-center">{{ element.priceUnit | currency }}</td>
                </ng-container>
                <ng-container matColumnDef="once">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Una vez costo</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__header-center">{{ element.price | currency }}</td>
                </ng-container>
                <ng-container matColumnDef="select">
                    <th mat-header-cell *matHeaderCellDef class="table__header"></th>
                    <td mat-cell *matCellDef="let element" class="table__data">
                        <input 
                            type="checkbox"
                            id="service_list_{{ element.id }}"
                            name="service_list_{{ element.id }}"
                            class="table__input-radio"
                            (change)="selectingServices( element )" />
                        <label class="table__icon" for="service_list_{{ element.id }}">
                            <span class="table__icon-radio"></span>
                        </label>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="table_adding_services"></tr>
                <tr mat-row *matRowDef="let row; columns: table_adding_services;"></tr>
            </table>
        </div>
        <div class="ml-col-1 margin-top-m">
            <span class="font-big" *ngIf="services_selected != 0">
                Servicios seleccionados
            </span>
        </div>
        <div class="ml-col-1 ap-info__buttons" *ngIf="services_selected == 0">
            <span class="ap-info__noitems">
                Aún no se han seleccionado servicios
            </span>
        </div>   
        <div class="ml-col-1 margin-top-x" id="form_services_added" *ngIf="services_selected != 0">
            <div class="ml-col-1 padding-general-x card-style margin-bottom-x" service="added" *ngFor="let service of services_selected;">
                <!-- div class="ml-col-1 ap-form__sdato margin-bottom-x">
                    <div class="ml-col-1">
                      <span class="text-bold">Service selected:</span> 
                      
                    </div>
                </div -->
                <div class="ml-col-1 margin-bottom-x">
                    <button 
                        (click)="removeServices( service.id )"
                        class="ap-form__rButton button-red button-icon button-icon--delete-white">
                        Quitar servicio
                    </button>
                    <h4 class="ap-form__titulo ap-form__titulo--auto-width">
                        {{ service.name }}
                    </h4>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                      <div class="ap-form__input">
                        <select
                            required
                            type="text" 
                            placeholder="Recurrente"
                            id="addServ_time_{{ service.id }}" 
                            name="addServ_time_{{ service.id }}"
                            [class.form_error_found]="service.no_select"
                            value="{{ service.service_lapse }}"
                            class="ap-form__input-text"
                            (change)="updateServiceSelectedPrice( service, $event.target )">
                            <option value="" disabled>Selecionar tipo</option>
                            <option value="1">Recurrente</option>
                            <option value="2">Una vez</option>
                        </select>
                        <label 
                          for="addServ_time_{{ service.id }}" 
                          class="ap-form__label ap-form__label-text">
                          Recurrente 
                        </label>
                        <span class="ml-col-1 form_error_found_label" *ngIf="service.no_select">
                            Recurrente se requiere*
                          </span>
                      </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                      <div class="ap-form__input">
                        <input 
                          required
                          type="date" 
                          placeholder="Fecha Inicio*"
                          id="addServ_sDate_{{ service.id }}" 
                          name="addServ_sDate_{{ service.id }}"
                          (change)="addServiceDateValidator('addServ_sDate_' + service.id,'addServ_eDate_' + service.id, service.id)"
                          [class.form_error_found]="service.no_sDate"
                          class="ap-form__input-text" />
                        <label 
                          for="addServ_sDate_{{ service.id }}" 
                          class="ap-form__label ap-form__label-text ap-form__label-text--active">
                          Fecha Inicio 
                        </label>
                        <span class="ml-col-1 form_error_found_label" *ngIf="service.no_sDate">
                            Fecha Inicio se requiere*
                          </span>
                      </div>
                    </div>
                </div>
                <div class="ml-col-4">
                    <div class="ml-col-1">
                      <div class="ap-form__input">
                        <input 
                          required
                          type="date" 
                          disabled
                          (change)="addServiceDateValidator('addServ_sDate_' + service.id,'addServ_eDate_' + service.id, service.id)"
                          placeholder="Fecha de Finalización*"
                          id="addServ_eDate_{{ service.id }}" 
                          name="addServ_eDate_{{ service.id }}"
                          class="ap-form__input-text"
                          [class.form_error_found]="service.no_eDate"/>
                        <label 
                          for="addServ_eDate_{{ service.id }}" 
                          class="ap-form__label ap-form__label-text ap-form__label-text--active">
                          Fecha de Finalización 
                        </label>
                        <span class="ml-col-1 form_error_found_label" *ngIf="service.no_eDate">
                            Fecha de Finalización se requiere*
                        </span>
                      </div>
                    </div>
                </div>
                <div class="ml-col-4 ap-form__group" *ngIf="service.service_lapse != ''">
                    <p class="ap-form__group-dato" *ngIf="service.service_lapse == '1'">
                        <span class="text-bold">Precio Recurrente</span>
                        {{ service?.priceUnit | currency }}
                    </p>
                    <p class="ap-form__group-dato" *ngIf="service.service_lapse == '2'">
                        <span class="text-bold">percio Una Vez</span>
                        {{ service?.price | currency }}
                    </p>
                    <p class="ap-form__group-dato">
                        <span class="text-bold">Total</span>
                        {{ service?.total | currency }}
                    </p>
                </div>
            </div>
            <div class="ml-col-1 text-center margin-top-x">
                Campos requeridos <span class="color-red text-bold">*</span>
            </div>
            <div class="ml-col-1 ap-form__buttons">
                <!-- <button 
                  type="button"
                  (click)="showModal()"
                  class="ap-form__buttons-button button-pink">
                  Cancelar
                </button> -->
                <button 
                  type="button"
                  (click)="saveOrPayServicesSelected()"
                  class="ap-form__buttons-button button-green button-icon button-icon--add-white">
                  Agregar a Cueanta
                </button>
                <button 
                  type="button"
                  (click)="payServicesConfirm()"
                  class="ap-form__buttons-button ap-form__buttons-button--no-margin button-blue button-icon button-icon--ccard-white">
                  Pagar servicios
                </button>
            </div>
        </div>
    </div>
    <form class="ml-modal__content ml-modal__content--min card-style" *ngIf="modal_to_show == 'edit_end_date'"> 
        <div class="ml-col-1 margin-bottom-m">
            <p class="ml-modal__pop-titulo ap-form__titulo--auto-width">
                Editar Fecha de Finalización
            </p>
            <button 
                class="ap-form__rButton button-red button-icon button-icon--cancel-white"
                (click)="showModal('edit_end_date'); editEndDateInit();">
                Cerrar
            </button>
        </div> 
        <!-- div class="ml-col-1">
            <div class="ml-col-1 margin-bottom-m position-relative">
                <span class="font-big"></span>
                <button 
                    type="button"
                    (click)="showModal();"
                    class="ap-form__close button-orange">x
                </button> 
            </div>
        </div -->
        <div class="ml-col-1 margin-bottom-x">
            <div class="ml-col-4o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Membresía:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ current_membership?.membresia }}  
                </div>
            </div>
            <div class="ml-col-3o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Costo por noche:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ current_membership?.costPerNigth | currency }} 
                </div>
            </div>
            <div class="ml-col-3o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Camas:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ current_membership?.beds }} 
                </div>
            </div>
        </div>
        <div class="ml-col-1">Selecciona nueva fecha de finalización de reservación.</div>
        <div class="ml-col-1 margin-top-x">
            <div class="ml-col-2">
                <div class="ml-col-1">
                  <div class="ap-form__input">
                    <input 
                      readonly
                      type="date" 
                      placeholder="Fecha Inicio*"
                      id="addServ_sDate_n" 
                      name="addServ_sDate_n"
                      class="ap-form__input-text ap-form__input--no-border"
                      [min]="endDateData.date_s"
                      [value]="endDateData.date_s" />
                    <label 
                      for="addServ_sDate_n" 
                      class="ap-form__label ap-form__label-text ap-form__label-text--active">
                      Fecha Inicio 
                    </label>
                  </div>
                </div>
            </div>
            <div class="ml-col-2">
                <div class="ml-col-1">
                  <div class="ap-form__input">
                    <input 
                      required
                      type="date" 
                      placeholder="Fecha de Finalización*"
                      id="addServ_eDate_n" 
                      name="addServ_eDate_n"
                      class="ap-form__input-text"
                      [min]="endDateData.date_s"
                      [value]="endDateData.date_e"
                      [(ngModel)]="endDateData.date_e"
                      [class.form_error_found]="end_date_form.no_edat"
                      [min]="endDateDataMinEnd"
                      (change)="updateEndDateData( endDateData.date_e )" />
                    <label 
                      for="addServ_eDate_n" 
                      class="ap-form__label ap-form__label-text ap-form__label-text--active">
                      Fecha de Finalización
                    </label>
                    <span class="ml-col-1 form_error_found_label" *ngIf="end_date_form.no_edat">
                        Fecha de Finalización se requiere*
                      </span>
                  </div>
                </div>
            </div>
            <div class="ml-col-1">
                <div class="ml-col-1">
                  <div class="ap-form__input">
                    <p class="ap-form__input-dato text-bold">
                        {{ endDateData?.days_res | number }}
                    </p>
                    <label 
                      for="addServ_eDate_n" 
                      class="ap-form__label ap-form__label-text ap-form__label-text--active">
                      Días reservados:
                    </label>
                  </div>
                </div>
            </div>
            <div class="table__footer no-border-top">
                <div class="table__footer-dato">
                    <p class="table__footer-dato-a no-padding-left">Monto Adicional:</p> 
                    <span class="text-bold table__footer-dato-b table__footer-dato--big">
                        {{ ( endDateData?.total_pay * ( current_membership?.beds ) ) | currency }}
                    </span>
                </div>
            </div>
            <!-- div class="ml-col-1">
                <div class="ml-col-1">
                  <div class="ap-form__input">
                    <p class="ap-form__input-dato">
                        {{ ( endDateData?.total_pay * ( current_membership?.beds + current_membership?.additionalBeds.length ) ) | currency }}
                    </p>
                    <label 
                      for="addServ_eDate_n" 
                      class="ap-form__label ap-form__label-text ap-form__label-text--active">
                      Total payment: 
                    </label>
                  </div>
                </div>
            </div -->
        </div>
        <div class="ml-modal__pop-buttons">
            <!-- <button 
                (click)="showModal()"
                type="button"
                class="ml-modal__pop-buttons-button button-pink">
                Cancelar
            </button> -->
            <button 
                (click)="updateEndDateConfirm()"
                type="button"
                class="ml-modal__pop-buttons-button button-black button-icon button-icon--ccard-white">
                Pagar
            </button>
        </div>
        <!-- div class="ml-col-1 ap-form__buttons">
            <button 
              type="button"
              (click)="showModal();"
              class="ap-form__buttons-button button-pink">
              Cancelar
            </button>
            <button
              (click)="updateEndDateConfirm()" 
              class="ap-form__buttons-button button-black">
              Pay
            </button>
        </div -->
    </form>
    <div class="ml-modal__pop" *ngIf="modal_to_show == 'confirm_pay_endDate'"> 
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Cambio Fecha de Finalización
        </p>
        <p class="ml-modal__pop-text">
            ¿Estas seguro de cambiar la Fecha de Finalización?
        </p>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="updateEndDateConfirm( false );"
                class="ml-modal__pop-buttons-button button-pink button-icon button-icon--cancel-white">
                Cancelar
            </button>
            <button 
                (click)="updateEndDate()"
                class="ml-modal__pop-buttons-button button-black button-icon button-icon--ccard-white">
                Confirmar Pagó
            </button>
        </div>
    </div>
    <div class="ml-modal__content card-style" *ngIf="modal_to_show == 'history'">
        <div class="ml-col-1 margin-bottom-x">
            <p class="ml-modal__pop-titulo ap-form__titulo--auto-width">
                Booking's Detalle
            </p>
            <button 
                class="ap-form__rButton button-red button-icon button-icon--cancel-white"
                (click)="showModal();">
                Cerrar
            </button>
        </div>         
        <div class="ml-col-1 margin-bottom-x">
            <div class="ml-col-1">
                <h4 class="ap-form__titulo ap-form__titulo--auto-width">
                    {{ history_selected?.build }}
                </h4>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Programa Inicio:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.dateStart }}  
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Programa Termino:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.dateEnd }} 
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Check In:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.dateStartReal != null ? history_selected?.dateStartReal : 'No Date' }}  
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Check Out:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.dateEndReal != null ? history_selected?.dateEndReal : 'No Date' }} 
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Roomate tipo:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.roomateType }}
                </div>
            </div>
        </div>
        <div class="ml-col-1 margin-bottom-x">
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Cuarto:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.roomName }}
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Camas reservadas:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.beds }}
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Noches reservadas:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.customDateDif }}  
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Membresía:
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.membresia }}
                </div>
            </div>
            <div class="ml-col-2o ap-form__sdato ap-form__sdato--no-padding">
                <div class="ml-col-1">
                    Costo por noche: 
                </div>
                <div class="ml-col-1 text-bold">
                    {{ history_selected?.costPerNigth | currency }}
                </div>
            </div>
        </div>
        <div class="ml-col-1 margin-bottom-min">
            <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
                <div class="ap-form__titulo">
                    Camas Adicionales
                </div>
            </div>
            <div class="ml-col-1 margin-top-x" *ngFor="let bed of history_selected?.additionalBeds;">
                <div class="ml-col-1 padding-general-m card-style margin-bottom-x">
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                          <div class="ap-form__input">
                            <input 
                              required
                              readonly
                              type="text" 
                              placeholder="Nombre*"
                              id="ab_name" 
                              name="ab_name"
                              class="ap-form__input-text ap-form__input-text ap-form__input--no-border"
                              value="{{ bed.name }}" />
                            <label 
                              for="ab_name" 
                              class="ap-form__label ap-form__label-text"
                              [class.ap-form__label-text--active]="bed.name != ''">
                              Nombre* 
                            </label>
                          </div>
                        </div>
                    </div>
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                          <div class="ap-form__input">
                            <input 
                              required
                              readonly
                              type="text" 
                              placeholder="Apellido Paterno*"
                              id="ab_lname" 
                              name="ab_lname"
                              class="ap-form__input-text ap-form__input-text ap-form__input--no-border"
                              value="{{ bed.lastName }}" />
                            <label 
                              for="ab_lname" 
                              class="ap-form__label ap-form__label-text"
                              [class.ap-form__label-text--active]="bed.lastName != ''">
                              Apellido Paterno* 
                            </label>
                          </div>
                        </div>
                    </div>
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                          <div class="ap-form__input">
                            <input 
                              required
                              readonly
                              type="text" 
                              placeholder="Apellido Materno*"
                              id="ab_mname" 
                              name="ab_mname"
                              class="ap-form__input-text ap-form__input-text ap-form__input--no-border"
                              value="{{ bed.motherName }}"
                               />
                            <label 
                              for="ab_mname" 
                              class="ap-form__label ap-form__label-text"
                              [class.ap-form__label-text--active]="bed.motherName != ''">
                              Apellido Materno* 
                            </label>
                          </div>
                        </div>
                    </div>
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                            <div class="ap-form__input">
                                <input 
                                    required
                                    readonly
                                    type="text" 
                                    placeholder="Apellido Materno*"
                                    id="ab_mname" 
                                    name="ab_mname"
                                    class="ap-form__input-text ap-form__input--no-border"
                                    value="{{ bed.gender }}" />
                                <label 
                                    for="ab_mname" 
                                    class="ap-form__label ap-form__label-text"
                                    [class.ap-form__label-text--active]="bed.id != null">
                                    Género* 
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                          <div class="ap-form__input">
                            <input 
                              required
                              readonly
                              type="text" 
                              placeholder="Email*"
                              id="ab_mail" 
                              name="ab_mail"
                              class="ap-form__input-text ap-form__input-text ap-form__input--no-border"
                              value="{{ bed.email }}" />
                            <label 
                              for="ab_mail" 
                              class="ap-form__label ap-form__label-text"
                              [class.ap-form__label-text--active]="bed.email != ''">
                              Email* 
                            </label>
                          </div>
                        </div>
                    </div>
                    <div class="ml-col-4">
                        <div class="ml-col-1">
                          <div class="ap-form__input">
                            <input 
                              required
                              readonly
                              type="text" 
                              placeholder="Número de teléfono*"
                              id="ab_phone" 
                              name="ab_phone"
                              class="ap-form__input-text ap-form__input-text ap-form__input--no-border"
                              value="{{ bed.phone }}" />
                            <label 
                              for="ab_phone" 
                              class="ap-form__label ap-form__label-text"
                              [class.ap-form__label-text--active]="bed.phone != ''">
                              Número de teléfono* 
                            </label>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <h4 class="ap-form__titulo">
            Pagos
        </h4>
        <div class="ml-col-1">
            <div class="ml-col-4o margin-bottom-x">
                <div class="ml-col-1 text-bold margin-bottom-x">
                   {{ history_selected?.membresia }}
                </div>
                <div class="ml-col-1 padding-right-m">
                    {{ history_selected?.memdesc }}
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Noches reservadas:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ history_selected?.customDateDif }}
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Camas:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ history_selected?.beds }} 
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-center">
                    <div class="ml-col-1 padding-bottom-x">
                        Tipo de Habitación:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ history_selected?.typeRoom }}
                    </div>
                </div>
            </div>
            <div class="ml-col-15">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding text-right">
                    <div class="ml-col-1 padding-bottom-x">
                        Monto:
                    </div>
                    <div class="ml-col-1 text-bold">
                        {{ history_selected?.price | currency }}
                    </div>
                </div>
            </div>
        </div>
        <!-- div class="ml-col-1 ap-membership">
            <div class="ap-membership__container ap-membership__container--c">
                <p class="ap-membership__text ml-col-1">
                    Type Room
                    <span class="text-bold">
                        {{ history_selected?.typeRoom }}
                    </span>
                </p>
                <p class="ap-membership__text ml-col-1">
                    Servicios included
                </p>
                <div class="ml-col-1 ap-membership__services">
                    <figure class="ap-membership__services-service" *ngFor="let service of history_selected.services;">
                        <img class="ap-membership__services-service-img" 
                             src="{{ service.icon }}" />
                        <span class="ap-membership__services-service-name">
                            {{ service.name }}
                        </span>
                    </figure>
                </div>
            </div>
        </div -->
        <div class="ml-col-1 margin-tb-min">
            <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
                <div class="ml-col-1">
                    Paid Servicios 
                </div>
            </div>
            <table mat-table mat-sort [dataSource]="history_selected?.servicesAditional" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                <ng-container matColumnDef="icon">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center"></th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                        <figure class="table__icon">
                            <img src="{{ element.icon }}" 
                                 class="table__icon-img filter-brightness" />
                        </figure>
                    </td>
                </ng-container>
                <ng-container matColumnDef="service">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Service</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.booked }}</td>
                </ng-container>
                <ng-container matColumnDef="type">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Type</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.typeService }}</td>
                </ng-container>
                <ng-container matColumnDef="lapse">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Lapse</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.type }}</td>
                </ng-container>
                <ng-container matColumnDef="sdate">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha Inicio</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecini }}</td>
                </ng-container>
                <ng-container matColumnDef="edate">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Fecha de Finalización</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.fecfinish }}</td>
                </ng-container>
                <ng-container matColumnDef="xcost">
                    <th mat-header-cell *matHeaderCellDef class="table__header table__header-right">Extra Monto</th>
                    <td mat-cell *matCellDef="let element" class="table__data table__data-right">{{ element.cost | currency }}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="table_colums_pending"></tr>
                <tr mat-row *matRowDef="let row; columns: table_colums_pending;"></tr>
            </table>
            <div class="table__footer">
                <div class="table__footer-dato">
                    <p class="table__footer-dato-a">Servicios bill:</p> 
                    <span class="text-bold table__footer-dato-b">
                        {{ history_selected_services_bill | currency }}
                    </span>
                </div>
                <div class="table__footer-dato">
                    <p class="table__footer-dato-a">Membresía costo:</p> 
                    <span class="text-bold table__footer-dato-b">
                        {{ history_selected?.price - history_selected_services_bill | currency }}
                    </span>
                </div>
                <div class="table__footer-dato">
                    <p class="table__footer-dato-a">Total:</p> 
                    <span class="text-bold table__footer-dato-b table__footer-dato--big">
                        {{ history_selected_services_total | currency }}
                    </span>
                </div>
            </div>
        </div>
        <div class="ml-col-1 margin-bottom-min">
            <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
                <div class="ap-form__titulo">
                    Historial de Pagos
                </div>
            </div>
            <div class="ml-col-1">
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x">
                    <div class="ml-col-1">
                        Membresías Historial
                    </div>
                </div>
                <table mat-table mat-sort [dataSource]="history_selected_memberships" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                    <ng-container matColumnDef="membership">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Membresía</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.nameMembership }}</td>
                    </ng-container>
                    <ng-container matColumnDef="dateStart">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio de inicio</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateStart }}</td>
                    </ng-container>
                    <ng-container matColumnDef="dateEnd">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Service Termino</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateEnd }}</td>
                    </ng-container>
                    <ng-container matColumnDef="payday">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Día de Pagó</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.paymentData.datePay }}</td>
                    </ng-container>
                    <ng-container matColumnDef="ammount">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Monto</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.paymentData.amount | currency }}</td>
                    </ng-container>
                    <ng-container matColumnDef="card">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Card clue</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">**** {{ element.creditNumber }}</td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="table_payHistory_colums"></tr>
                    <tr mat-row *matRowDef="let row; columns: table_payHistory_colums;"></tr>
                </table>
                <div class="ml-col-1 ap-form__sdato ap-form__sdato--no-padding padding-tb-x margin-top-x">
                    <div class="ml-col-1">
                        Historial de Servicios
                    </div>
                </div>
                <table mat-table mat-sort [dataSource]="history_selected_servicesHis" class="mat-elevation-z8 table--no-shadow" style="width: 100%;">
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicios</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.idServiceNavigation?.name }}</td>
                    </ng-container>
                    <ng-container matColumnDef="dateStart">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__data-center">Servicio Inicio</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateStart }}</td>
                    </ng-container>
                    <ng-container matColumnDef="dateEnd">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Servicio Termino</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.dateEnd }}</td>
                    </ng-container>
                    <ng-container matColumnDef="payday">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Día de Pagó</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">{{ element.cc.datePay }}</td>
                    </ng-container>
                    <ng-container matColumnDef="card">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Card clue</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                            <span *ngIf="element.cardClue == null">No Data</span>
                            <span *ngIf="element.cardClue != null">**** {{ element?.cardClue }}</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef class="table__header table__header-center">Monto</th>
                        <td mat-cell *matCellDef="let element" class="table__data table__data-center">
                            {{ element.amount | currency }}
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="table_serHistory_colums"></tr>
                    <tr mat-row *matRowDef="let row; columns: table_serHistory_colums;"></tr>
                </table>
            </div>
        </div>
        <div class="ml-col-1 ap-form__buttons margin-top-m">
            <button 
              type="button"
              (click)="showModal();"
              class="ap-form__buttons-button button-red button-icon button-icon--cancel-white">
              Cerrar
            </button>
        </div>
    </div>
    <div class="ml-modal__pop" *ngIf="modal_to_show == 'confirm_payment'"> 
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Servicios pendientes de pago
        </p>
        <p class="ml-modal__pop-text">
            ¿Está seguro de pagar los servicios pendientes?
        </p>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="showModal()"
                class="ml-modal__pop-buttons-button button-pink button-icon button-icon--cancel-white">
                Cancelar
            </button>
            <button 
                (click)="payPendingItems()"
                class="ml-modal__pop-buttons-button button-black button-icon button-icon--ccard-white">
                Confirmar Pagó
            </button>
        </div>
    </div>
</div>
<div class="ml-modal ml-modal--up ml-modal--bg-black" *ngIf="popup_payment_service">
    <div class="ml-modal__pop">
        <p class="ml-modal__pop-titulo margin-bottom-m">
            Pagar servicios
        </p>
        <p class="ml-modal__pop-text">
            ¿Está seguro de pagar los servicios seleccionados?
        </p>
        <div class="ml-modal__pop-buttons">
            <button 
                (click)="payServicesConfirm( false );"
                class="ml-modal__pop-buttons-button button-pink button-icon button-icon--cancel-white">
                Cancelar
            </button>
            <button 
                (click)="saveOrPayServicesSelected('pay')"
                class="ml-modal__pop-buttons-button button-black button-icon button-icon--ccard-white">
                Confirmar Pagó
            </button>
        </div>
    </div>
</div>
